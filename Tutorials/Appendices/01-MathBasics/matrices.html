
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Matrices &#8212; Learn DirectX</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/proof.css?v=ca93fcec" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="../../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=afe5de03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Tutorials/Appendices/01-MathBasics/matrices';</script>
    <link rel="canonical" href="https://github.com/PAMinerva/LearnDirectX/Tutorials/Appendices/01-MathBasics/matrices.html" />
    <link rel="icon" href="../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Transformations" href="transformations.html" />
    <link rel="prev" title="Vectors" href="vectors.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content">ðŸš§ This documentation is a work in progress! ðŸš§</div>
  </div>

  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../../presentation.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.png" class="logo__image only-light" alt="Learn DirectX - Home"/>
    <script>document.write(`<img src="../../../_static/logo.png" class="logo__image only-dark" alt="Learn DirectX - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../presentation.html">
                    Welcome to Learn DirectX
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../00-Intro/intro-and-prerequisites.html">Introduction and Prerequisites</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Hello DirectX</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../01-HelloWorld/hello-world.html">Hello World</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../01-HelloWorld/hello-window.html">Hello Window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01-HelloWorld/hello-triangle.html">Hello Triangle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01-HelloWorld/hello-bundles.html">Hello Bundles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01-HelloWorld/hello-cbs.html">Hello Constant Buffers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01-HelloWorld/hello-texture.html">Hello Texture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01-HelloWorld/hello-frame-buffering.html">Hello Frame Buffering</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="math-basics.html">Math Basics</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="vectors.html">Vectors</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="transformations.html">Transformations</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/PAMinerva/LearnDirectX" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/PAMinerva/LearnDirectX/issues/new?title=Issue%20on%20page%20%2FTutorials/Appendices/01-MathBasics/matrices.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/Tutorials/Appendices/01-MathBasics/matrices.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Matrices</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definition">Definition</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-matrix-operations">Basic matrix operations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#addition">Addition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scalar-multiplication">Scalar multiplication</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#properties-of-addition-and-scalar-multiplications">Properties of addition and scalar multiplications</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matrix-multiplication">Matrix multiplication</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#vector-matrix-multiplication">Vector-Matrix multiplication</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#properties-of-matrix-multiplication">Properties of matrix multiplication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#transpose-of-a-matrix">Transpose of a matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#identity-matrix">Identity matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#determinant-of-a-matrix">Determinant of a matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adjoint-of-a-matrix">Adjoint of a matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inverse-of-a-matrix">Inverse of a matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#memory-layout">Memory layout</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matrices-in-directx">Matrices in DirectX</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hlsl">HLSL</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c">C++</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="matrices">
<h1>Matrices<a class="headerlink" href="#matrices" title="Link to this heading">#</a></h1>
<p>Matrices are fundamental mathematical structures that play a crucial role in various fields, including mathematics, physics, engineering, and computer graphics as well. They provides a compact and efficient way to express transformations, such as scaling, rotation, and translation. This feature enables easy manipulation of the position, orientation, or size of 3D objects in a rendering scene in an easy way.</p>
<br>
<section id="definition">
<h2>Definition<a class="headerlink" href="#definition" title="Link to this heading">#</a></h2>
<p>Basically, a matrix is just a rectangular table of real numbers arranged in rows and columns.<br>
The dimensions of a matrix are determined by the number of its rows and columns. For instance, an <span class="math notranslate nohighlight">\(m\times n\)</span> matrix consists of <span class="math notranslate nohighlight">\(m\)</span> rows and <span class="math notranslate nohighlight">\(n\)</span> columns. The individual numbers within a matrix are referred to as elements or entries. To indicate a specific entry within a matrix <span class="math notranslate nohighlight">\(\mathbf{M}\)</span>, a double subscript notation, such as <span class="math notranslate nohighlight">\(M_{ij}\)</span>, is often used to specify the element located in the i-th row and j-th column. Matrices are conventionally denoted using square brackets.</p>
<div class="math notranslate nohighlight">
\[\mathbf{M}=\left\lbrack\matrix{M_{00}&amp;M_{01}&amp;\cdots&amp;M_{0(n-1)} \cr M_{10}&amp;M_{11}&amp;\cdots&amp;M_{1(n-1)} \cr \vdots&amp;\vdots&amp;\ddots&amp;\vdots \cr M_{(m-1)1}&amp;\cdots&amp;M_{(m-1)0}&amp;M_{0(n-1)}}\right\rbrack\]</div>
<p>In computer graphics, it is common to work with square matrices <span class="math notranslate nohighlight">\(n\times n\)</span>, where the number of rows and columns are equal. Row and column vectors, which are matrices with dimensions of <span class="math notranslate nohighlight">\(1\times n\)</span> and <span class="math notranslate nohighlight">\(n\times 1\)</span> respectively, are also widely used. When it comes to row and column vectors, a different naming convention is typically used: lowercase letters are used instead of uppercase ones. This is because row and column vectors can be used as operands in certain vector operations.</p>
<div class="math notranslate nohighlight">
\[\mathbf{u}=\left\lbrack\matrix{u_0&amp;u_1&amp;\cdots&amp;u_{n-1}}\right\rbrack\quad\quad\quad\quad\mathbf{v}=\left\lbrack\matrix{v_0 \cr v_1 \cr \vdots \cr v_{n-1}}\right\rbrack\]</div>
<p>We can also use them to specify the rows or columns of a matrix. For example, we can write the following <span class="math notranslate nohighlight">\(3\times 3\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{M}\)</span> by using 3 row vectors, or 3 column vectors.</p>
<div class="math notranslate nohighlight">
\[\mathbf{M}=\left\lbrack\matrix{M_{00}&amp;M_{01}&amp;M_{02}\cr M_{10}&amp;M_{11}&amp;M_{12}\cr M_{20}&amp;M_{21}&amp;M_{22}}\right\rbrack=\left\lbrack\matrix{\gets&amp;\mathbf{u}_0&amp;\rightarrow\cr \gets&amp;\mathbf{u}_1&amp;\rightarrow\cr \gets&amp;\mathbf{u}_2&amp;\rightarrow}\right\rbrack=\left\lbrack\matrix{\uparrow&amp;\uparrow&amp;\uparrow\cr \mathbf{v}_0&amp;\mathbf{v}_1&amp;\mathbf{v}_2\cr \downarrow&amp;\downarrow&amp;\downarrow}\right\rbrack\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathbf{u_i}=\left\lbrack\matrix{M_{i0}&amp;M_{i1}&amp;M_{i2}}\right\rbrack\)</span>, <span class="math notranslate nohighlight">\(\ \mathbf{v_i}=\left\lbrack\matrix{M_{0i}&amp;M_{1i}&amp;M_{2i}}\right\rbrack\)</span> and <span class="math notranslate nohighlight">\(0\le i&lt;3\)</span>.</p>
<p>For a more extensive and detailed presentation on vectors, you may find valuable information in <span id="id1">[<a class="reference internal" href="#id14" title="Gerald E. Farin and Dianne Hansford. Practical Linear Algebra: A Geometry Toolbox. CRC Press, 4th edition, 2021.">FH21</a>]</span> and <span id="id2">[<a class="reference internal" href="#id15" title="Philip Schneider and David H. Eberly. Geometric Tools for Computer Graphics. Morgan Kaufmann, 1st edition, 2002.">SE02</a>]</span>.</p>
<br>
</section>
<section id="basic-matrix-operations">
<h2>Basic matrix operations<a class="headerlink" href="#basic-matrix-operations" title="Link to this heading">#</a></h2>
<p>There are several interesting operations that can be performed with matrices, including addition, subtraction, and two different types of multiplication.</p>
<section id="addition">
<h3>Addition<a class="headerlink" href="#addition" title="Link to this heading">#</a></h3>
<p>The addition of two matrices <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> and <span class="math notranslate nohighlight">\(\mathbf{B}\)</span> can only be performed if the matrices have the same dimensions. If this condition is met, the corresponding elements of the matrices are added together.</p>
<div class="math notranslate nohighlight">
\[\mathbf{A}+\mathbf{B}=\left\lbrack\matrix{A_{00}&amp;A_{01}&amp;A_{02}\cr A_{10}&amp;A_{11}&amp;A_{12}\cr A_{20}&amp;A_{21}&amp;A_{22}}\right\rbrack+\left\lbrack\matrix{B_{00}&amp;B_{01}&amp;B_{02}\cr B_{10}&amp;B_{11}&amp;B_{12}\cr B_{20}&amp;B_{21}&amp;B_{22}}\right\rbrack=\left\lbrack\matrix{A_{00}+B_{00}&amp;A_{01}+B_{01}&amp;A_{02}+B_{02}\cr A_{10}+B_{10}&amp;A_{11}+B_{11}&amp;A_{12}+B_{12}\cr A_{20}+B_{20}&amp;A_{21}+B_{21}&amp;A_{22}+B_{22}}\right\rbrack\]</div>
<p>The difference of two matrices is defined in a similar way.</p>
<div class="math notranslate nohighlight">
\[\mathbf{A}-\mathbf{B}=\left\lbrack\matrix{A_{00}&amp;A_{01}&amp;A_{02}\cr A_{10}&amp;A_{11}&amp;A_{12}\cr A_{20}&amp;A_{21}&amp;A_{22}}\right\rbrack-\left\lbrack\matrix{B_{00}&amp;B_{01}&amp;B_{02}\cr B_{10}&amp;B_{11}&amp;B_{12}\cr B_{20}&amp;B_{21}&amp;B_{22}}\right\rbrack=\left\lbrack\matrix{A_{00}-B_{00}&amp;A_{01}-B_{01}&amp;A_{02}-B_{02}\cr A_{10}-B_{10}&amp;A_{11}-B_{11}&amp;A_{12}-B_{12}\cr A_{20}-B_{20}&amp;A_{21}-B_{21}&amp;A_{22}-B_{22}}\right\rbrack\]</div>
</section>
<section id="scalar-multiplication">
<h3>Scalar multiplication<a class="headerlink" href="#scalar-multiplication" title="Link to this heading">#</a></h3>
<p>We can multiply a matrix <span class="math notranslate nohighlight">\(\mathbf{M}\)</span> with a scalar <span class="math notranslate nohighlight">\(k\)</span> by scaling all the elements of the matrix by <span class="math notranslate nohighlight">\(k\)</span>.</p>
<div class="math notranslate nohighlight">
\[k\mathbf{M}=\left\lbrack\matrix{kM_{00}&amp;kM_{01}&amp;kM_{02}\cr kM_{10}&amp;kM_{11}&amp;kM_{12}\cr kM_{20}&amp;kM_{21}&amp;kM_{22}}\right\rbrack\]</div>
<section id="properties-of-addition-and-scalar-multiplications">
<h4>Properties of addition and scalar multiplications<a class="headerlink" href="#properties-of-addition-and-scalar-multiplications" title="Link to this heading">#</a></h4>
<p>Since addition and scalar multiplication are performed element-wise on matrices, they inherit the following properties from real numbers:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Property</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Commutative</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathbf{A}+\mathbf{B} = \mathbf{B}+\mathbf{A}\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Associative</p></td>
<td><p><span class="math notranslate nohighlight">\((\mathbf{A}+\mathbf{B})+\mathbf{C}=\mathbf{A}+(\mathbf{B}+\mathbf{C})\)</span></p></td>
</tr>
<tr class="row-even"><td><p>Distributive (scalar)</p></td>
<td><p><span class="math notranslate nohighlight">\((k+t)\mathbf{A} = k\mathbf{A}+t\mathbf{A}\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Distributive (matrix)</p></td>
<td><p><span class="math notranslate nohighlight">\(k(\mathbf{A}+\mathbf{B}) = k\mathbf{A}+k\mathbf{B}\)</span></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="matrix-multiplication">
<h3>Matrix multiplication<a class="headerlink" href="#matrix-multiplication" title="Link to this heading">#</a></h3>
<p>In order to multiply two matrices <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> and <span class="math notranslate nohighlight">\(\mathbf{B}\)</span>, it is necessary for the number of columns in <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> to be equal to the number of rows in <span class="math notranslate nohighlight">\(\mathbf{B}\)</span>. This requirement arises because each element <span class="math notranslate nohighlight">\(C_{ij}\)</span> of the resulting matrix <span class="math notranslate nohighlight">\(\mathbf{C}\)</span> is obtained by taking the dot product of the i-th row of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> and the j-th column of <span class="math notranslate nohighlight">\(\mathbf{B}\)</span>. This means that, if <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> is an <span class="math notranslate nohighlight">\(m\times n\)</span> matrix and <span class="math notranslate nohighlight">\(\mathbf{B}\)</span> is an <span class="math notranslate nohighlight">\(n\times p\)</span> matrix, the resulting matrix <span class="math notranslate nohighlight">\(\mathbf{C}\)</span> will have dimensions <span class="math notranslate nohighlight">\(m\times p\)</span>. This is because we need to multiply each of the <span class="math notranslate nohighlight">\(m\)</span> rows of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> by each of the <span class="math notranslate nohighlight">\(p\)</span> columns of <span class="math notranslate nohighlight">\(\mathbf{B}\)</span> in order to obtain all the elements of <span class="math notranslate nohighlight">\(\mathbf{C}\)</span>. That is,</p>
<div class="math notranslate nohighlight">
\[\begin{equation}\tag{1}C_{ij}=\mathbf{A}_{i\ast}\cdot\mathbf{B}_{\ast j}\label{eq:AMatrices1}\end{equation}\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathbf{A}_{i\ast}\)</span> is the i-th row of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>, and <span class="math notranslate nohighlight">\(\mathbf{B}_{\ast j}\)</span> is the j-th column of <span class="math notranslate nohighlight">\(\mathbf{B}\)</span>.</p>
<p>As an example, the following illustration shows that if we multiply a <span class="math notranslate nohighlight">\(2\times 3\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> by a <span class="math notranslate nohighlight">\(3\times 2\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{B}\)</span>, we get a <span class="math notranslate nohighlight">\(2\times 2\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{C}\)</span> where the top-left element <span class="math notranslate nohighlight">\(C_{00}\)</span> is computed by taking the dot product of the 0-th row of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> and the 0-th column of <span class="math notranslate nohighlight">\(\mathbf{B}\)</span>.</p>
<figure class="align-default">
<img alt="../../../_images/matrix-multiplication.png" src="../../../_images/matrix-multiplication.png" />
</figure>
<p>Observe that matrix multiplication is always defined for square matrices of the same dimension, and the resulting matrix will have the same dimensions as the operands.</p>
<section id="vector-matrix-multiplication">
<h4>Vector-Matrix multiplication<a class="headerlink" href="#vector-matrix-multiplication" title="Link to this heading">#</a></h4>
<p>A row vector is a <span class="math notranslate nohighlight">\(1\times n\)</span> matrix, so we can multiply it with a generic <span class="math notranslate nohighlight">\(n\times p\)</span> matrix. For example, if <span class="math notranslate nohighlight">\(\mathbf{u}=(x, y, z)\)</span> is a three-component vector that represent a row vector and <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> is a <span class="math notranslate nohighlight">\(3\times 3\)</span> matrix, applying equation <span class="math notranslate nohighlight">\(\eqref{eq:AMatrices1}\)</span> we have that</p>
<div class="math notranslate nohighlight">
\[\mathbf{uA}=\left\lbrack\matrix{x&amp;y&amp;z}\right\rbrack\left\lbrack\matrix{A_{00}&amp;A_{01}&amp;A_{02}\cr A_{10}&amp;A_{11}&amp;A_{12}\cr A_{20}&amp;A_{21}&amp;A_{22}}\right\rbrack=\left\lbrack\matrix{\mathbf{u}\cdot\mathbf{A}_{\ast 0}&amp;\mathbf{u}\cdot\mathbf{A}_{\ast 1}&amp;\mathbf{u}\cdot\mathbf{A}_{\ast 2}}\right\rbrack\]</div>
<p>The result is a row vector with three elements (just like <span class="math notranslate nohighlight">\(\mathbf{u}\)</span>) where each entry is the dot product of <span class="math notranslate nohighlight">\(\mathbf{u}\)</span> and a column of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>. Now, if we actually perform the dot product we have</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\mathbf{uA}&amp;=\left\lbrack\matrix{\mathbf{u}\cdot\mathbf{A}_{\ast 0}&amp;\mathbf{u}\cdot\mathbf{A}_{\ast 1}&amp;\mathbf{u}\cdot\mathbf{A}_{\ast 2}}\right\rbrack \\
&amp;=\left\lbrack\matrix{xA_{00}+yA_{10}+zA_{20}&amp;\quad xA_{01}+yA_{11}+zA_{21}&amp;\quad xA_{02}+yA_{12}+zA_{22}}\right\rbrack \\
&amp;=\left\lbrack\matrix{xA_{00}&amp;xA_{01}&amp;xA_{02}}\right\rbrack+\left\lbrack\matrix{yA_{10}&amp;yA_{11}&amp;yA_{12}}\right\rbrack+\left\lbrack\matrix{zA_{20}&amp;zA_{21}&amp;zA_{22}}\right\rbrack \\
&amp;=x\mathbf{A}_{0\ast}+y\mathbf{A}_{1\ast}+z\mathbf{A}_{2\ast}
\end{align*}
\end{split}\]</div>
<p>So, the vector-matrix multiplication can be seen as a sum of the rows of the matrix, scaled by the elements of the vector. This is an example of linear combination: a sum of vectors multiplied (scaled) by scalar coefficients. In this case, the vectors are the row vectors of the matrix, while the scalar coefficients are the elements of the vector acting as left operandin the multiplication. We can also write this linear combination as the product of a row vector and a column vector.</p>
<div class="math notranslate nohighlight">
\[\mathbf{uA}=x\mathbf{A}_{0\ast}+y\mathbf{A}_{1\ast}+z\mathbf{A}_{2\ast}=\left\lbrack\matrix{x&amp;y&amp;z}\right\rbrack\left\lbrack\matrix{\mathbf{A}_{0\ast}\cr \mathbf{A}_{1\ast}\cr \mathbf{A}_{2\ast}}\right\rbrack\]</div>
<p>As you may easily notice, the multiplication of a row vector and a column vector is closely related to the concept of dot product. Indeed, we have that</p>
<div class="math notranslate nohighlight">
\[\mathbf{a}\cdot\mathbf{b}=\left\lbrack\matrix{a_x&amp;a_y&amp;a_z}\right\rbrack\left\lbrack\matrix{b_x\cr b_y\cr b_z}\right\rbrack=a_xb_x+a_yb_y+a_zb_z\]</div>
<p>That is, we can consider the operands of a dot product as row and column vectors, rather than just ordinary vectors.</p>
<p>What we have discussed so far in this section applies in general. That is, if we have a <span class="math notranslate nohighlight">\(1\times n\)</span> row vector <span class="math notranslate nohighlight">\(\mathbf{u}\)</span> and an <span class="math notranslate nohighlight">\(n\times p\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>, then the product <span class="math notranslate nohighlight">\(\mathbf{uA}\)</span> is a linear combination of the rows of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>, with scalar coefficients given by the elements of <span class="math notranslate nohighlight">\(\mathbf{u}\)</span>.</p>
<div class="math notranslate nohighlight">
\[\mathbf{uA}=\left\lbrack\matrix{u_0&amp;u_1&amp;\cdots&amp;u_{n-1}}\right\rbrack\left\lbrack\matrix{A_{00}&amp;\cdots&amp;A_{0(n-1)}\cr \vdots&amp;\ddots&amp;\cdots\cr A_{(n-1)0}&amp;\cdots&amp;A_{(n-1)(n-1)}}\right\rbrack=u_0\mathbf{A}_{0\ast}+u_1\mathbf{A}_{1\ast}+\cdots+u_{n-1}\mathbf{A}_{(n-1)\ast}\]</div>
<p>We can also multiply an <span class="math notranslate nohighlight">\(m\times n\)</span> matrix by an <span class="math notranslate nohighlight">\(n\times 1\)</span> column vector. For example, if <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> is a <span class="math notranslate nohighlight">\(3\times 3\)</span> matrix and <span class="math notranslate nohighlight">\(\mathbf{u}\)</span> is a three-component vector that represent a column vector, we have that</p>
<div class="math notranslate nohighlight">
\[\mathbf{Au}=\left\lbrack\matrix{A_{00}&amp;A_{01}&amp;A_{02}\cr A_{10}&amp;A_{11}&amp;A_{12}\cr A_{20}&amp;A_{21}&amp;A_{22}}\right\rbrack\left\lbrack\matrix{x\cr y\cr z}\right\rbrack=\left\lbrack\matrix{\mathbf{u}\cdot\mathbf{A}_{0\ast}\cr \mathbf{u}\cdot\mathbf{A}_{1\ast}\cr \mathbf{u}\cdot\mathbf{A}_{2\ast}}\right\rbrack\]</div>
<p>The result is a column vector with three elements where each entry is the dot product of <span class="math notranslate nohighlight">\(\mathbf{u}\)</span> and a row of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>. Now, if we perform the dot product we have</p>
<div class="math notranslate nohighlight">
\[\mathbf{Au}=x\mathbf{A}_{\ast 0}+y\mathbf{A}_{\ast 1}+z\mathbf{A}_{\ast 2}=\left\lbrack\matrix{\mathbf{A}_{\ast 0}&amp;\mathbf{A}_{\ast 1}&amp;\mathbf{A}_{\ast 2}}\right\rbrack\left\lbrack\matrix{x\cr y\cr z}\right\rbrack\]</div>
<p>Therefore, the product of a matrix and a column vector is a linear combination of the columns of the matrix, scaled by the elements of the column vector.</p>
</section>
<section id="properties-of-matrix-multiplication">
<h4>Properties of matrix multiplication<a class="headerlink" href="#properties-of-matrix-multiplication" title="Link to this heading">#</a></h4>
<p>Since matrix multiplication is performed element-wise, it inherits the following properties from real numbers:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Property</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Associative</p></td>
<td><p><span class="math notranslate nohighlight">\((\mathbf{AB})\mathbf{C}=\mathbf{A}(\mathbf{BC})\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Distributive</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathbf{A}(\mathbf{B}+\mathbf{C})=\mathbf{AB}+\mathbf{AC}\)</span></p></td>
</tr>
</tbody>
</table>
<br>
<p>The commutative property does not apply for two reasons. Firstly, as mentioned earlier, matrix multiplication is only defined when the number of columns in the left matrix is equal to the number of rows in the right matrix. Secondly, even with square matrices of the same dimension (where matrix multiplication is always defined), swapping the order of the operands can lead to a different resultant matrix â”€ consider equation <span class="math notranslate nohighlight">\(\eqref{eq:AMatrices1}\)</span> and observe how each element of the resulting matrix is computed.</p>
<p>To conclude this section, as mentioned in <a class="reference internal" href="vectors.html"><span class="std std-doc">Vectors</span></a>, we stated that the cross product can be computed by multiplying a row vector by a matrix. We can now verify this statement using the following equation.</p>
<div class="math notranslate nohighlight">
\[\mathbf{w}=\mathbf{u}\times\mathbf{v}=\left\lbrack\matrix{v_x&amp;v_y&amp;v_z}\right\rbrack\left\lbrack\matrix{0&amp;u_z&amp;-u_y\cr -u_z&amp;0&amp;u_x\cr u_y&amp;-u_x&amp;0}\right\rbrack=(u_yv_z-u_zv_y,\ u_zv_x-u_xv_z,\ u_xv_y-u_yv_x)\]</div>
<p>Also, itâ€™s interesting to note that we can compute the orthogonal projection of a vector <span class="math notranslate nohighlight">\(\mathbf{v}\)</span> onto a unit vector <span class="math notranslate nohighlight">\(\mathbf{n}\)</span> by multiplying a row vector by a matrix.</p>
<div class="math notranslate nohighlight">
\[\text{proj}_{\mathbf{n}}(\mathbf{v})=(\mathbf{v}\cdot\mathbf{n})\mathbf{n}=\left\lbrack\matrix{v_x&amp;v_y&amp;v_z}\right\rbrack\left\lbrack\matrix{n_x^2&amp;n_xn_y&amp;n_xn_z\cr n_xn_y&amp;n_y^2&amp;n_yn_z\cr n_xn_z&amp;n_yn_z&amp;n_z^2}\right\rbrack\]</div>
<p>Indeed, observe that the i-th component of <span class="math notranslate nohighlight">\((\mathbf{v}\cdot\mathbf{n})\mathbf{n}\)</span> is computed by multiplying <span class="math notranslate nohighlight">\(n_i\)</span> with <span class="math notranslate nohighlight">\((\mathbf{v}\cdot\mathbf{n})\)</span>. For instance, the first component of <span class="math notranslate nohighlight">\((\mathbf{v}\cdot\mathbf{n})\mathbf{n}\)</span> is</p>
<div class="math notranslate nohighlight">
\[n_x(v_xn_x+v_yn_y+v_zn_z)=(v_xn_x^2+v_yn_xn_y+v_zn_xn_z)\]</div>
<p>As you can verify, the same result is obtained in the vector-matrix multiplication above by executing the dot product between <span class="math notranslate nohighlight">\(\mathbf{v}\)</span> and the first column of the matrix. The same applies to the other two components of <span class="math notranslate nohighlight">\((\mathbf{v}\cdot\mathbf{n})\mathbf{n}\)</span>.</p>
<br>
</section>
</section>
</section>
<section id="transpose-of-a-matrix">
<h2>Transpose of a matrix<a class="headerlink" href="#transpose-of-a-matrix" title="Link to this heading">#</a></h2>
<p>The transpose of a matrix <span class="math notranslate nohighlight">\(\mathbf{M}\)</span> is often denoted with <span class="math notranslate nohighlight">\(\mathbf{M}^T\)</span>. The transpose can be derived from the original matrix by simply interchanging its rows and columns.</p>
<div class="math notranslate nohighlight">
\[\mathbf{M}=\left\lbrack\matrix{1&amp;2&amp;3\cr 4&amp;5&amp;6\cr 7&amp;8&amp;9}\right\rbrack\quad\quad\quad\quad\mathbf{M^T}=\left\lbrack\matrix{1&amp;4&amp;7\cr 2&amp;5&amp;8\cr 3&amp;6&amp;9}\right\rbrack\]</div>
<p>As you can see, interchanging rows and columns in a matrix is equivalent to flipping the matrix over its diagonal. As a result, if we have a matrix <span class="math notranslate nohighlight">\(\mathbf{M}\)</span>, obtaining the ij-th entry of its transpose can be achieved by simply swapping the subscripts and specifying the ji-th entry</p>
<p>Below are the properties of the matrix transpose.</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\((\mathbf{A}^T)^T=\mathbf{A}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\((k\mathbf{A}^T)=k\mathbf{A}^T\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\((\mathbf{A}+\mathbf{B})^T=\mathbf{A}^T+\mathbf{B}^T\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\((\mathbf{AB})^T=\mathbf{B}^T\mathbf{A}^T\)</span></p></li>
</ul>
<div class="dropdown admonition">
<p class="admonition-title">Proof</p>
<p>The first three properties are straightforward to prove. For the last property, we can demonstrate it by computing the ji-th entry of both <span class="math notranslate nohighlight">\((\mathbf{AB})^T\)</span> and <span class="math notranslate nohighlight">\(\mathbf{B}^T\mathbf{A}^T\)</span>, and showing that they are equal. Specifically, we have:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
(\mathbf{AB})_{ij}^T&amp;=(\mathbf{AB})_{ji}=\mathbf{A}_{j\ast}\cdot\mathbf{B}_{\ast i} \\
\\
(\mathbf{B}^T\mathbf{A}^T)_{ij}&amp;=\mathbf{B}_{i\ast}^T\cdot\mathbf{A}_{\ast j}^T=\mathbf{B}_{\ast i}\cdot\mathbf{A}_{j\ast}
\end{align*}
\end{split}\]</div>
<p>The two expressions are the same since the dot product is commutative. Also, observe how we flipped the subscripts to refer to the corresponding entry in the transposes.</p>
</div>
<br>
</section>
<section id="identity-matrix">
<h2>Identity matrix<a class="headerlink" href="#identity-matrix" title="Link to this heading">#</a></h2>
<p>The identity matrix is a square matrix in which all the elements are zero, except for the entries on the main diagonal, which are all 1. The main diagonal consists of elements <span class="math notranslate nohighlight">\(M_{ij}\)</span> where <span class="math notranslate nohighlight">\(i=j\)</span>.</p>
<div class="math notranslate nohighlight">
\[\left\lbrack\matrix{1&amp;0\cr 0&amp;1}\right\rbrack\quad\quad\quad\quad\left\lbrack\matrix{1&amp;0&amp;0\cr 0&amp;1&amp;0\cr 0&amp;0&amp;1}\right\rbrack\quad\quad\quad\quad\left\lbrack\matrix{1&amp;0&amp;0&amp;0\cr 0&amp;1&amp;0&amp;0\cr 0&amp;0&amp;1&amp;0\cr 0&amp;0&amp;0&amp;1}\right\rbrack\]</div>
<p>The identity matrix is named as such because it serves as the multiplicative identity. That is, for an <span class="math notranslate nohighlight">\(n\times n\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{M}\)</span> and an identity matrix <span class="math notranslate nohighlight">\(\mathbf{I}\)</span> of the same dimension, we have the following property:</p>
<div class="math notranslate nohighlight">
\[\mathbf{MI} = \mathbf{IM} = \mathbf{M}\]</div>
<p>Observe that the multiplication with the identity matrix is commutative by definition, meaning that the order of multiplication does not matter. This is an exception to the general operation of matrix multiplication, where the order of multiplication typically matters and matrix multiplication is not commutative.</p>
<br>
</section>
<section id="determinant-of-a-matrix">
<h2>Determinant of a matrix<a class="headerlink" href="#determinant-of-a-matrix" title="Link to this heading">#</a></h2>
<p>The determinant of a matrix is closely related to the concept of hypervolume, which represents the measure of length in 1D, area in 2D, and volume in 3D. It is important to note that the determinant is only defined for square matrices. Now, you may be wondering what it means to have a signed length, area, or volume. As mentioned earlier in this tutorial (and as we will formally demonstrate in a subsequent appendix), matrices are associated with transformations, and the sign of the determinant indicates whether a transformation preserves or reverses the orientation of the standard basis vectors. In simpler terms, when multiplying (transforming) the standard basis vectors <span class="math notranslate nohighlight">\(\mathbf{i}\)</span>, <span class="math notranslate nohighlight">\(\mathbf{j}\)</span>, and <span class="math notranslate nohighlight">\(\mathbf{k}\)</span> by a square matrix with a positive determinant, the handedness of the resulting coordinate system remains unchanged.</p>
<p>Before delving into the calculation of the determinant of a matrix, we first need to introduce the concept of matrix minors. By matrix minor of an <span class="math notranslate nohighlight">\(n\times n\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> we mean the <span class="math notranslate nohighlight">\((nâˆ’1)\times(nâˆ’1)\)</span> matrix <span class="math notranslate nohighlight">\(\bar{\mathbf{A}}_{ij}\)</span> derived from <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> by deleting the i-th row and j-th column. For example,</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
&amp;\mathbf{A}=\left\lbrack\matrix{A_{00}&amp;A_{01}&amp;A_{02}\cr A_{10}&amp;A_{11}&amp;A_{12}\cr A_{20}&amp;A_{21}&amp;A_{22}}\right\rbrack \\
\\
&amp;{\bar{\mathbf{A}}}_{00}=\left\lbrack\matrix{A_{11}&amp;A_{12}\cr A_{21}&amp;A_{22}}\right\rbrack \\
\\
&amp;{\bar{\mathbf{A}}}_{01}=\left\lbrack\matrix{A_{10}&amp;A_{12}\cr A_{20}&amp;A_{22}}\right\rbrack
\end{align*}
\end{split}\]</div>
<p>Now, letâ€™s see how to calculate the determinant <span class="math notranslate nohighlight">\(\lvert\mathbf{A}\rvert\)</span> (or <span class="math notranslate nohighlight">\(det\mathbf{A}\)</span>) of a square matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>. First of all, the determinant of a <span class="math notranslate nohighlight">\(1\times 1\)</span> matrix is simply the only element in the matrix: <span class="math notranslate nohighlight">\(\lvert\mathbf{A}\rvert=A_{00}\)</span>, where <span class="math notranslate nohighlight">\(\mathbf{A}=\left\lbrack\matrix{A_{00}}\right\rbrack\)</span>. For matrices of higher dimensions, we can use the following recursive formula.</p>
<div class="math notranslate nohighlight">
\[\begin{equation}\tag{2}det\mathbf{A}=\sum_{j=0}^{n-1}\ [(-1)^{i+j}\cdot A_{ij}\cdot det{\bar{\mathbf{A}}}_{ij}]\label{eq:AMatrices2}\end{equation}\]</div>
<p>Observe that the dot in the equation above represents a scalar multiplication, not a dot product. The only variable in the equation is <span class="math notranslate nohighlight">\(j\)</span>, allowing you to choose any <span class="math notranslate nohighlight">\(i\)</span>-th row of matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> and apply equation <span class="math notranslate nohighlight">\(\eqref{eq:AMatrices2}\)</span>. Similarly, you can choose any <span class="math notranslate nohighlight">\(j\)</span>-th column of the matrix and apply equation <span class="math notranslate nohighlight">\(\eqref{eq:AMatrices2}\)</span> by changing the variable under the summation symbol to <span class="math notranslate nohighlight">\(i\)</span> instead of <span class="math notranslate nohighlight">\(j\)</span>.</p>
<p>Equation <span class="math notranslate nohighlight">\(\eqref{eq:AMatrices2}\)</span> provides a recursive method for calculating the determinant of a matrix. It involves computing the determinants of matrix minors and using them in a linear combination, where the coefficients are the elements of the chosen i-th row. This approach allows us to extend the calculation of determinants from <span class="math notranslate nohighlight">\(1\times 1\)</span> matrices to <span class="math notranslate nohighlight">\(2\times 2\)</span> matrices by applying the formula above (we will use the elements of the first row of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> as coefficients; that is, we set <span class="math notranslate nohighlight">\(i=0\)</span>).</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
det\left\lbrack\matrix{A_{00}&amp;A_{01}\cr A_{10}&amp;A_{11}}\right\rbrack=A_{00}\ det[A_{11}]-A_{01}\ det\,[A_{10}]=A_{00}A_{11}-A_{01}A_{10}\quad\quad\quad\quad\tag{3}\label{eq:AMatrices3} \\
\end{align*}
\end{split}\]</div>
<p>Now that we know how to calculate the determinants of <span class="math notranslate nohighlight">\(2\times 2\)</span> matrices, we can compute the determinants of <span class="math notranslate nohighlight">\(3\times 3\)</span> matrices as well.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
det\left\lbrack\matrix{A_{00}&amp;A_{01}&amp;A_{02}\cr A_{10}&amp;A_{11}&amp;A_{12}\cr A_{20}&amp;A_{21}&amp;A_{22}}\right\rbrack&amp;=A_{00}\ det\left\lbrack\matrix{A_{11}&amp;A_{12}\cr A_{21}&amp;A_{22}}\right\rbrack-A_{01}\ det\left\lbrack\matrix{A_{10}&amp;A_{12}\cr A_{20}&amp;A_{22}}\right\rbrack+A_{02}\ det\left\lbrack\matrix{A_{10}&amp;A_{11}\cr A_{20}&amp;A_{21}}\right\rbrack \\
&amp;=A_{00}A_{11}A_{22}-A_{00}A_{12}A_{21}-A_{01}A_{10}A_{22}+A_{01}A_{12}A_{20}+A_{02}A_{10}A_{11}-A_{02}A_{10}A_{21}
\end{align*}
\end{split}\]</div>
<p>As can be observed, the result obtained is similar to the outcome of the scalar triple product discussed in <a class="reference internal" href="vectors.html"><span class="std std-doc">Vectors</span></a>. This means that the determinant of a <span class="math notranslate nohighlight">\(3\times 3\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> represents the signed volume of the parallelepiped formed by its three row vectors (or column vectors; indeed, note that <span class="math notranslate nohighlight">\(\lvert\mathbf{A}\rvert\)</span>=<span class="math notranslate nohighlight">\(\lvert\mathbf{A}^T\rvert\)</span>). Specifically, if the row vectors are denoted as <span class="math notranslate nohighlight">\(\mathbf{A}_{0\ast}\)</span>, <span class="math notranslate nohighlight">\(\mathbf{A}_{1\ast}\)</span> and <span class="math notranslate nohighlight">\(\mathbf{A}_{2\ast}\)</span>, the sign of the determinant is positive if the vectors <span class="math notranslate nohighlight">\(\mathbf{A}_{0\ast}\)</span> and <span class="math notranslate nohighlight">\((\mathbf{A}_{1\ast}\times\mathbf{A}_{2\ast})\)</span> are on the same side (half-space) with respect to the plane defined by <span class="math notranslate nohighlight">\(\mathbf{A}_{1\ast}\)</span> and <span class="math notranslate nohighlight">\(\mathbf{A}_{2\ast}\)</span>. As will be further discussed in a later appendix, this property ensures that the handedness of a frame doesnâ€™t change if we use <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> to transform the standard basis vectors of the frame.</p>
<p>On the other hand, itâ€™s much easier to prove that the determinant of a <span class="math notranslate nohighlight">\(2\times 2\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> is the signed area of the parallelogram formed by its two row vectors <span class="math notranslate nohighlight">\(\mathbf{A}_{0\ast}\)</span> and <span class="math notranslate nohighlight">\(\mathbf{A}_{1\ast}\)</span>.</p>
<figure class="align-default">
<img alt="../../../_images/det-signed-area.png" src="../../../_images/det-signed-area.png" />
</figure>
<p>In the illustration above, we have that the area <span class="math notranslate nohighlight">\(T\)</span> of the triangle formed by <span class="math notranslate nohighlight">\(\mathbf{A}_{0\ast}\)</span> and <span class="math notranslate nohighlight">\(\mathbf{A}_{1\ast}\)</span> is</p>
<div class="math notranslate nohighlight">
\[T=A_{00}A_{11}-T_1-T_2-T_3\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
T_1&amp;=\frac{1}{2}A_{00}A_{01} \\
\\
T_2&amp;=\frac{1}{2}(A_{11}-A_{01})(A_{00}-A_{10}) \\
\\
T_3&amp;=\frac{1}{2}A_{10}A_{11}
\end{align*}
\end{split}\]</div>
<p>Substituting and simplifying, we get</p>
<div class="math notranslate nohighlight">
\[T=\frac{1}{2}A_{00}A_{11}-\frac{1}{2}A_{01}A_{10}\]</div>
<p>However, we want to calculate the area of the parallelogram <span class="math notranslate nohighlight">\(A_p\)</span> formed by <span class="math notranslate nohighlight">\(\mathbf{A}_{0\ast}\)</span> and <span class="math notranslate nohighlight">\(\mathbf{A}_{1\ast}\)</span>. For this purpose, we know that <span class="math notranslate nohighlight">\(A_p=2T\)</span>, so we have that <span class="math notranslate nohighlight">\(A_p\)</span> is equal to equation <span class="math notranslate nohighlight">\(\eqref{eq:AMatrices3}\)</span>, the determinant of a <span class="math notranslate nohighlight">\(2\times 2\)</span> matrix whose columns are <span class="math notranslate nohighlight">\(\mathbf{A}_{0\ast}\)</span> and <span class="math notranslate nohighlight">\(\mathbf{A}_{1\ast}\)</span>. If you can rotate <span class="math notranslate nohighlight">\(\mathbf{A}_{0\ast}\)</span> towards <span class="math notranslate nohighlight">\(\mathbf{A}_{1\ast}\)</span> in the same way as <span class="math notranslate nohighlight">\(\mathbf{i}\)</span> rotates towards <span class="math notranslate nohighlight">\(\mathbf{j}\)</span> then the area is positive, otherwise it is negative.</p>
<p>By now, you might have figured out how to compute the determinant of a <span class="math notranslate nohighlight">\(4\times 4\)</span> matrix.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
det\left\lbrack\matrix{A_{00}&amp;A_{01}&amp;A_{02}&amp;A_{03}\cr A_{10}&amp;A_{11}&amp;A_{12}&amp;A_{13}\cr A_{20}&amp;A_{21}&amp;A_{22}&amp;A_{23}\cr A_{30}&amp;A_{31}&amp;A_{32}&amp;A_{33}}\right\rbrack&amp;=A_{00}\ det\left\lbrack\matrix{A_{11}&amp;A_{12}&amp;A_{13}\cr A_{21}&amp;A_{22}&amp;A_{23}\cr A_{31}&amp;A_{32}&amp;A_{33}}\right\rbrack-A_{01}\ det\left\lbrack\matrix{A_{10}&amp;A_{12}&amp;A_{13}\cr A_{20}&amp;A_{22}&amp;A_{23}\cr A_{30}&amp;A_{32}&amp;A_{33}}\right\rbrack \\
\\
&amp;+\ A_{02}\ det\left\lbrack\matrix{A_{10}&amp;A_{11}&amp;A_{13}\cr A_{20}&amp;A_{21}&amp;A_{23}\cr A_{30}&amp;A_{31}&amp;A_{33}}\right\rbrack-A_{03}\ det\left\lbrack\matrix{A_{10}&amp;A_{11}&amp;A_{12}\cr A_{20}&amp;A_{21}&amp;A_{22}\cr A_{30}&amp;A_{31}&amp;A_{32}}\right\rbrack
\end{align*}
\end{split}\]</div>
<p>It can be proven that if we add a scaled column (or row) of a matrix to another column (or row) of the same matrix, the determinant does not change. However, we wonâ€™t provide a formal proof here as a practical example is more than enough. Indeed, below you can verify that if we scale the second column of a simple <span class="math notranslate nohighlight">\(2\times 2\)</span> matrix by <span class="math notranslate nohighlight">\(3\)</span>, and add the result to the first column, the determinant doesnâ€™t change.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
det\left\lbrack\matrix{1&amp;2\cr 3&amp;4}\right\rbrack&amp;=(1)(4)-(2)(3)=4-6=-2 \\
\\
det\left\lbrack\matrix{(1+3(2))&amp;2\cr (3+3(4))&amp;4}\right\rbrack&amp;=(7)(4)-(2)(15)=28-30=-2
\end{align*}
\end{split}\]</div>
<br>
</section>
<section id="adjoint-of-a-matrix">
<h2>Adjoint of a matrix<a class="headerlink" href="#adjoint-of-a-matrix" title="Link to this heading">#</a></h2>
<p>The cofactor <span class="math notranslate nohighlight">\(C_{ij}\)</span> of the entry <span class="math notranslate nohighlight">\(A_{ij}\)</span> in an <span class="math notranslate nohighlight">\(n\times n\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> can be defined as follows</p>
<div class="math notranslate nohighlight">
\[C_{ij}=(-1)^{i+j}\ det{\bar{\mathbf{A}}}_{ij}\]</div>
<p>Computing the cofactor of every element of the matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>, we can create the cofactor matrix <span class="math notranslate nohighlight">\(\mathbf{C}_\mathbf{A}\)</span> of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>, where <span class="math notranslate nohighlight">\(C_{ij}\)</span> is the element of <span class="math notranslate nohighlight">\(\mathbf{C}_\mathbf{A}\)</span> at the ij-th position.</p>
<div class="math notranslate nohighlight">
\[\mathbf{C}_\mathbf{A}=\left\lbrack\matrix{C_{00}&amp;\cdots&amp;C_{0n}\cr \vdots&amp;\ddots&amp;\vdots\cr C_{n0}&amp;\cdots&amp;C_{nn}}\right\rbrack\]</div>
<p>The adjoint <span class="math notranslate nohighlight">\(\mathbf{A}^\ast\)</span> of the matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> is simply the transpose of its cofactor matrix: <span class="math notranslate nohighlight">\(\mathbf{A}^\ast=\mathbf{C}_\mathbf{A}^T\)</span>.
So, we have that the ij-th element of <span class="math notranslate nohighlight">\(\mathbf{A}^\ast\)</span> is</p>
<div class="math notranslate nohighlight">
\[\tag{4}
C_{ij}^T=(-1)^{i+j}\ det\bar{\mathbf{A}}_ {ji}
\label{eq:AMatrices4}
\]</div>
<p>Please note the swap between subscripts in the matrix minor to select the corresponding entry in the transpose.</p>
<p>The adjoint of a matrix, and in particular the equation <span class="math notranslate nohighlight">\(\eqref{eq:AMatrices4}\)</span>, is useful to compute the inverse of the matrix.</p>
<br>
</section>
<section id="inverse-of-a-matrix">
<h2>Inverse of a matrix<a class="headerlink" href="#inverse-of-a-matrix" title="Link to this heading">#</a></h2>
<p>In matrix algebra, the concept of inverse only applies to square matrices and is similar to the concept of inverse (or reciprocal) for real numbers. Specifically, for an <span class="math notranslate nohighlight">\(n\times n\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{M}\)</span>, its inverse <span class="math notranslate nohighlight">\(\mathbf{M}^{-1}\)</span> (which is still <span class="math notranslate nohighlight">\(n\times n\)</span>) can be computed as follows:</p>
<div class="math notranslate nohighlight">
\[\mathbf{M}\mathbf{M}^{-1}=\mathbf{M}^{-1}\mathbf{M}=\mathbf{I}\]</div>
<p>Just like with real numbers, if we multiply a matrix by its inverse we get the the multiplicative identity (in this case, an identity matrix of the same dimension). Observe that the inverse of <span class="math notranslate nohighlight">\(\mathbf{M}^{-1}\)</span> is <span class="math notranslate nohighlight">\(\mathbf{M}\)</span>, so the commutative property applies by definition (this is the second exception to the general operation of matrix multiplication). A relevant difference from real numbers is that not every square matrix has an inverse. If the inverse <span class="math notranslate nohighlight">\(\mathbf{M}^{-1}\)</span> exists, it is unique and we say that <span class="math notranslate nohighlight">\(\mathbf{M}\)</span> is invertible, otherwise we call it singular. It can be proven that we can use equations <span class="math notranslate nohighlight">\(\eqref{eq:AMatrices2}\)</span> and <span class="math notranslate nohighlight">\(\eqref{eq:AMatrices4}\)</span> to compute the ij-th entry of the inverse <span class="math notranslate nohighlight">\(\mathbf{A}^{-1}\)</span> of a matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>.</p>
<div class="math notranslate nohighlight">
\[
\tag{5}
A_{ij}^{-1}=\displaystyle {C_{ij}^T \over det\mathbf{A}}
\label{eq:AMatrices5}
\]</div>
<div class="proof example admonition" id="matrices-example1">
<p class="admonition-title"><span class="caption-number">Example 1 </span></p>
<section class="example-content" id="proof-content">
<p>Given a <span class="math notranslate nohighlight">\(2\times 2\)</span> matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> and its inverse <span class="math notranslate nohighlight">\(\mathbf{A}^{-1}\)</span></p>
<div class="math notranslate nohighlight">
\[\mathbf{A}=\left\lbrack\matrix{a&amp;b\cr c&amp;d}\right\rbrack\quad\quad\quad\quad\mathbf{A}^{-1}=\left\lbrack\matrix{v_{00}&amp;v_{01}\cr v_{10}&amp;v_{11}}\right\rbrack\]</div>
<p>Since <span class="math notranslate nohighlight">\(\mathbf{A}\mathbf{A}^{-1}=\mathbf{I}\)</span> we have that</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\left\lbrack\matrix{a&amp;b}\right\rbrack\ \mathbf{A}^{-1}=\left\lbrack\matrix{1&amp;0}\right\rbrack \\
\left\lbrack\matrix{c&amp;d}\right\rbrack\ \mathbf{A}^{-1}=\left\lbrack\matrix{0&amp;1}\right\rbrack
\end{align*}
\end{split}\]</div>
<p>From these two expressions, we can derive the following system of four equations with four unknowns <span class="math notranslate nohighlight">\(v_{ij}\)</span>.</p>
<div class="math notranslate nohighlight">
\[
 \begin{cases} 
 a\ v_{00}+b\ v_{01} &amp;=1 \cr 
 a\ v_{10}+b\ v_{11} &amp;=0 \cr 
 c\ v_{00}+d\ v_{01} &amp;=0 \cr 
 c\ v_{10}+d\ v_{11} &amp;=1
 \end{cases}\]</div>
<p>If we solve this system for <span class="math notranslate nohighlight">\(v_{00}\)</span> we get</p>
<div class="math notranslate nohighlight">
\[v_{00}=\displaystyle {d \over ad-bc}\]</div>
<p>Thatâ€™s exactly the ratio between the cofactor of the 00-th element of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> and the its determinant. The same applies to the other unknowns and to matrices of higher dimensions as well, since it always ends up with a system of <span class="math notranslate nohighlight">\(n\)</span> equations with <span class="math notranslate nohighlight">\(n\)</span> unknowns.</p>
</section>
</div><br>
<p>As you may have noticed, in equation <span class="math notranslate nohighlight">\(\eqref{eq:AMatrices5}\)</span> we have a determinant in the denominator, which can be zero. This explains why not all square matrices have an inverse. Indeed, a matrix is invertible if its determinant is not zero.</p>
<p>Below are the properties of the matrix inverse.</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\((\mathbf{A}^{-1})^T=(\mathbf{A}^T)^{-1}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\((\mathbf{AB})^{-1}=\mathbf{B}^{-1}\mathbf{A}^{-1}\)</span></p></li>
</ul>
<div class="dropdown admonition">
<p class="admonition-title">Proof</p>
<p>For the first property, we need to show that <span class="math notranslate nohighlight">\((\mathbf{A}^{-1})^T\)</span> is the inverse of <span class="math notranslate nohighlight">\(\mathbf{A}^T\)</span>. And indeed, from <span class="math notranslate nohighlight">\((\mathbf{AB})^T=\mathbf{B}^T\mathbf{A}^T\)</span> we have that</p>
<div class="math notranslate nohighlight">
\[(\mathbf{A}^{-1})^T\mathbf{A}^T=(\mathbf{A}\mathbf{A}^{-1})^T=\mathbf{I}^T=\mathbf{I}\]</div>
<p>For the second property, assuming that <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> and <span class="math notranslate nohighlight">\(\mathbf{B}\)</span> are square and invertible matrices, we need to show that <span class="math notranslate nohighlight">\((\mathbf{AB})(\mathbf{B}^{-1}\mathbf{A}^{-1})=\mathbf{I}\)</span> and <span class="math notranslate nohighlight">\((\mathbf{B}^{-1}\mathbf{A}^{-1})(\mathbf{AB})=\mathbf{I}\)</span>. Indeed, using the associative property of matrix multiplication, we have that</p>
<div class="math notranslate nohighlight">
\[(\mathbf{AB})(\mathbf{B}^{-1}\mathbf{A}^{-1})=\mathbf{A}(\mathbf{B}\mathbf{B}^{-1})\mathbf{A}^{-1}=\mathbf{AI}\mathbf{A}^{-1}=\mathbf{A}\mathbf{A}^{-1}=\mathbf{I}\]</div>
<div class="math notranslate nohighlight">
\[(\mathbf{B}^{-1}\mathbf{A}^{-1})(\mathbf{AB})=\mathbf{B}^{-1}(\mathbf{A}\mathbf{A}^{-1})\mathbf{B}=\mathbf{B}^{-1}\mathbf{IB}=\mathbf{B}^{-1}\mathbf{B}=\mathbf{I}\]</div>
</div>
<br>
</section>
<section id="memory-layout">
<h2>Memory layout<a class="headerlink" href="#memory-layout" title="Link to this heading">#</a></h2>
<p>The elements of matrices used in C++ applications are stored contiguously row by row in CPU memory (RAM), as illustrated below.</p>
<div class="math notranslate nohighlight">
\[\left\lbrack\matrix{A_{00}&amp;A_{01}&amp;A_{02}&amp;A_{03}\cr A_{10}&amp;A_{11}&amp;A_{12}&amp;A_{13}\cr A_{20}&amp;A_{21}&amp;A_{22}&amp;A_{23}\cr A_{30}&amp;A_{31}&amp;A_{32}&amp;A_{33}}\right\rbrack\quad\longrightarrow\quad \vert A_{00}\vert A_{01}\vert A_{02}\vert A_{03}\vert A_{10}\vert A_{11}\vert A_{12}\vert A_{13}\vert A_{20}\vert A_{21}\vert A_{22}\vert A_{23}\vert A_{30}\vert A_{31}\vert A_{32}\vert A_{33}\vert\]</div>
<p>We refer to this arrangement of elements as row-major order. <br>
Of course, the elements of matrices used in shader code are stored contiguously in GPU memory as well. However, by default, they are considered as stored column by column. We refer to this arrangement as column-major order. Then, to represent the same matrix in shader code, its elements should have the following layout when stored in GPU heaps.</p>
<div class="math notranslate nohighlight">
\[\left\lbrack\matrix{A_{00}&amp;A_{01}&amp;A_{02}&amp;A_{03}\cr A_{10}&amp;A_{11}&amp;A_{12}&amp;A_{13}\cr A_{20}&amp;A_{21}&amp;A_{22}&amp;A_{23}\cr A_{30}&amp;A_{31}&amp;A_{32}&amp;A_{33}}\right\rbrack\quad\longrightarrow\quad \vert A_{00}\vert A_{10}\vert A_{20}\vert A_{30}\vert A_{01}\vert A_{11}\vert A_{21}\vert A_{31}\vert A_{02}\vert A_{12}\vert A_{22}\vert A_{32}\vert A_{03}\vert A_{13}\vert A_{23}\vert A_{33}\vert\]</div>
<p>Now, a problem arises whenever we have to pass matrix data from our C++ applications to shader programs. As stated in a previous tutorial, the transfer of data from CPU to GPU is just a bit stream. Then, if we simply copy the matrix data from CPU memory to a GPU heap, the transpose of the matrix will be passed because the contiguous elements of the rows in CPU memory will be considered columns in GPU memory by the shader code.</p>
<div class="math notranslate nohighlight">
\[\vert A_{00}\vert A_{01}\vert A_{02}\vert A_{03}\vert A_{10}\vert A_{11}\vert A_{12}\vert A_{13}\vert A_{20}\vert A_{21}\vert A_{22}\vert A_{23}\vert A_{30}\vert A_{31}\vert A_{32}\vert A_{33}\vert\quad\longrightarrow\quad\left\lbrack\matrix{A_{00}&amp;A_{10}&amp;A_{20}&amp;A_{30}\cr A_{01}&amp;A_{11}&amp;A_{21}&amp;A_{31}\cr A_{02}&amp;A_{12}&amp;A_{22}&amp;A_{32}\cr A_{03}&amp;A_{13}&amp;A_{23}&amp;A_{33}}\right\rbrack\]</div>
<p>Fortunately, we showed that <span class="math notranslate nohighlight">\((\mathbf{A}^T)^T=\mathbf{A}\)</span>. Thismeans that we only need to transpose a matrix before passing it to the GPU in order to fix the problem. Another approach is to enforce a row-major order by indicating <strong>#pragma pack_matrix(row_major)</strong> at the start of a shader program. Alternatively, we can specify a row-major order for a single matrix by prefixing its declaration in the shader code with the keyword <strong>row_major</strong>. In the upcoming tutorials we will simply transpose the matrices in our C++ applications before passing them to the GPU. This way, we can work with matrices by using the default major orders both in C++ and HLSL.</p>
<p>To conclude this section, itâ€™s interesting to see how we can use the intrinsic function <strong>mul</strong> (available in HLSL), which multiplies two operands using matrix math. The HLSL documentation describes the <strong>mul</strong> function as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span>  <span class="n">mul</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>The <strong>x</strong> input value is a matrix. If <strong>x</strong> is a vector, it treated as a row vector.<br>
The <strong>y</strong> input value is a matrix. If <strong>y</strong> is a vector, it treated as a column vector.</p>
<p>The number of columns of <strong>x</strong> and the number of rows of <strong>y</strong> must be equal.<br>
The result <strong>ret</strong> has the dimension (<strong>x</strong>-rows <span class="math notranslate nohighlight">\(\times\)</span> <strong>y</strong>-columns).</p>
</div></blockquote>
<p>Now, if we want to multiply two matrices, or a vector and a matrix, whatâ€™s the best way to do it using the <strong>mul</strong> function? Letâ€™s assume we are using a column-major order in the shader code.</p>
<p>If you want to multiply two <span class="math notranslate nohighlight">\(n\times n\)</span> matrices <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> and <span class="math notranslate nohighlight">\(\mathbf{B}\)</span>, then we transpose them in the C++ code before passing the matrix data to the GPU. At that point, in the HLSL code, we simply pass <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> as the first argument and <span class="math notranslate nohighlight">\(\mathbf{B}\)</span> as the second argument of <strong>mul</strong>, which will return a matrix where each element is the dot product of a row of <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> with a column of <span class="math notranslate nohighlight">\(\mathbf{B}\)</span>.</p>
<p>On the other hand, what happens if you want to multiply a vector and a matrix? Well, it depends on how you want to perform this operation. If you want to multiply the row vector by each column of the matrix, then you should pass the row vector as the first argument, and the transpose of the matrix as the second argument to <strong>mul</strong>. Indeed, after copying the transpose of the matrix in a GPU heap, the layout of its elements in memory will be</p>
<div class="math notranslate nohighlight">
\[\vert A_{00}\vert A_{10}\vert A_{20}\vert A_{30}\vert A_{01}\vert A_{11}\vert A_{21}\vert A_{31}\vert A_{02}\vert A_{12}\vert A_{22}\vert A_{32}\vert A_{03}\vert A_{13}\vert A_{23}\vert A_{33}\vert\]</div>
<p>Therefore, the columns can be easily loaded into shader core registers since their entries are contiguous in memory.</p>
<div class="math notranslate nohighlight">
\[reg_1: \vert A_{00}\vert A_{10}\vert A_{20}\vert A_{30}\vert\]</div>
<div class="math notranslate nohighlight">
\[reg_2: \vert A_{01}\vert A_{11}\vert A_{21}\vert A_{31}\vert\]</div>
<div class="math notranslate nohighlight">
\[reg_3: \vert A_{02}\vert A_{12}\vert A_{22}\vert A_{32}\vert\]</div>
<div class="math notranslate nohighlight">
\[reg_4: \vert A_{03}\vert A_{13}\vert A_{23}\vert A_{33}\vert\]</div>
<p>The row vector is loaded in a register as well.</p>
<div class="math notranslate nohighlight">
\[reg_0: \vert x\vert y\vert z\vert w\vert\]</div>
<p>At that point, the GPU can simply compute the dot product of <span class="math notranslate nohighlight">\(reg_0\)</span> with the other registers to compute the four elements of the resultant vector.</p>
<p>Under the same conditions, if you want to multiply a column vector by each row of the matrix, then you can pass the transpose of the matrix as the first argument, and the vector as the second argument to <strong>mul</strong>. At that point, the GPU may have to execute more instructions to perform the dot product of the vector with the rows of the matrix since the elements of the matrix are ordered column by column. The conditional is used because the real GPU instructions (not the bytecode) could be similar in both cases. The following listings show both the bytecode and a possible translation in GPU machine code of the multiplication between a vector (<strong>vpos</strong>) and a matrix (<strong>World</strong>), passed as arguments to <strong>mul</strong>.</p>
<div class="highlight-nasm notranslate"><div class="highlight"><pre><span></span><span class="c1"># BYTECODE (DXBC\DXIL)</span>
<span class="c1"># output.position = mul(vpos, World);</span>
<span class="w"> </span>
<span class="nf">dp4</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.x</span><span class="p">,</span><span class="w"> </span><span class="nv">v0.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nv">World</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nv">.xyzw</span><span class="w">  </span><span class="c1"># dot product of vpos with the 1st column of World</span>
<span class="nf">dp4</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.y</span><span class="p">,</span><span class="w"> </span><span class="nv">v0.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nv">World</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="nv">.xyzw</span><span class="w">  </span><span class="c1"># dot product of vpos with the 2nd column of World</span>
<span class="nf">dp4</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.z</span><span class="p">,</span><span class="w"> </span><span class="nv">v0.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nv">World</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="nv">.xyzw</span><span class="w">  </span><span class="c1"># dot product of vpos with the 3rd column of World</span>
<span class="nf">dp4</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.w</span><span class="p">,</span><span class="w"> </span><span class="nv">v0.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nv">World</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="nv">.xyzw</span><span class="w">  </span><span class="c1"># dot product of vpos with the 4th column of World </span>
</pre></div>
</div>
<div class="highlight-nasm notranslate"><div class="highlight"><pre><span></span><span class="c1"># BYTECODE (DXBC\DXIL)</span>
<span class="c1"># output.position = mul(World, vpos);</span>
<span class="w"> </span>
<span class="nf">mul</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nv">v0.xxxx</span><span class="p">,</span><span class="w"> </span><span class="nv">World</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="nv">.xyzw</span><span class="w">  </span><span class="c1"># scale the 1st column of World by vpos.x and put the result in r0</span>
<span class="nf">mul</span><span class="w"> </span><span class="nb">r1</span><span class="nv">.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nv">v0.yyyy</span><span class="p">,</span><span class="w"> </span><span class="nv">World</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="nv">.xyzw</span><span class="w">  </span><span class="c1"># scale the 2st column of World by vpos.y and put the result in r1</span>
<span class="nf">add</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nb">r1</span><span class="nv">.xyzw</span><span class="w">        </span><span class="c1"># r0 += r1; sum of the first 2 addends</span>
<span class="nf">mul</span><span class="w"> </span><span class="nb">r1</span><span class="nv">.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nv">v0.zzzz</span><span class="p">,</span><span class="w"> </span><span class="nv">World</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="nv">.xyzw</span><span class="w">  </span><span class="c1"># scale the 3rd column of World by vpos.z and put the result in r1</span>
<span class="nf">add</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nb">r1</span><span class="nv">.xyzw</span><span class="w">        </span><span class="c1"># r0 += r1; add the third addend</span>
<span class="nf">mul</span><span class="w"> </span><span class="nb">r1</span><span class="nv">.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nv">v0.wwww</span><span class="p">,</span><span class="w"> </span><span class="nv">World</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="nv">.xyzw</span><span class="w">  </span><span class="c1"># scale the 4th column of World by vpos.z and put the result in r1</span>
<span class="nf">add</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nb">r0</span><span class="nv">.xyzw</span><span class="p">,</span><span class="w"> </span><span class="nb">r1</span><span class="nv">.xyzw</span><span class="w">        </span><span class="c1"># r0 += r1; add the fourth addend</span>
</pre></div>
</div>
<div class="highlight-nasm notranslate"><div class="highlight"><pre><span></span><span class="c1"># ISA Disassembly</span>
<span class="c1"># output.position = mul(vpos, World);</span>
<span class="w"> </span>
<span class="nf">v_mul_f32</span><span class="w"> </span><span class="nv">v0</span><span class="p">,</span><span class="w"> </span><span class="nv">s0</span><span class="p">,</span><span class="w"> </span><span class="nv">v4</span><span class="w">            </span><span class="c1"># 000000000018: 0A000800             v0 = ax</span>
<span class="nf">v_mul_f32</span><span class="w"> </span><span class="nv">v1</span><span class="p">,</span><span class="w"> </span><span class="nv">s4</span><span class="p">,</span><span class="w"> </span><span class="nv">v4</span><span class="w">            </span><span class="c1"># 00000000001C: 0A020804             v1 = bx</span>
<span class="nf">v_mul_f32</span><span class="w"> </span><span class="nv">v2</span><span class="p">,</span><span class="w"> </span><span class="nv">s8</span><span class="p">,</span><span class="w"> </span><span class="nv">v4</span><span class="w">            </span><span class="c1"># 000000000020: 0A040808             v2 = cx</span>
<span class="nf">v_mul_f32</span><span class="w"> </span><span class="nv">v3</span><span class="p">,</span><span class="w"> </span><span class="nv">s12</span><span class="p">,</span><span class="w"> </span><span class="nv">v4</span><span class="w">           </span><span class="c1"># 000000000024: 0A06080C             v3 = dx</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v0</span><span class="p">,</span><span class="w"> </span><span class="nv">s1</span><span class="p">,</span><span class="w"> </span><span class="nv">v5</span><span class="w">            </span><span class="c1"># 000000000028: 2C000A01             v0 = ey + ax</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v1</span><span class="p">,</span><span class="w"> </span><span class="nv">s5</span><span class="p">,</span><span class="w"> </span><span class="nv">v5</span><span class="w">            </span><span class="c1"># 00000000002C: 2C020A05             v1 = fy + bx</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v2</span><span class="p">,</span><span class="w"> </span><span class="nv">s9</span><span class="p">,</span><span class="w"> </span><span class="nv">v5</span><span class="w">            </span><span class="c1"># 000000000030: 2C040A09             v2 = gy + cx</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v3</span><span class="p">,</span><span class="w"> </span><span class="nv">s13</span><span class="p">,</span><span class="w"> </span><span class="nv">v5</span><span class="w">           </span><span class="c1"># 000000000034: 2C060A0D             v3 = hy + dx</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v0</span><span class="p">,</span><span class="w"> </span><span class="nv">s2</span><span class="p">,</span><span class="w"> </span><span class="nv">v6</span><span class="w">            </span><span class="c1"># 000000000038: 2C000C02             v0 = iz + ey + ax</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v1</span><span class="p">,</span><span class="w"> </span><span class="nv">s6</span><span class="p">,</span><span class="w"> </span><span class="nv">v6</span><span class="w">            </span><span class="c1"># 00000000003C: 2C020C06             v1 = jz + fy + bx</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v2</span><span class="p">,</span><span class="w"> </span><span class="nv">s10</span><span class="p">,</span><span class="w"> </span><span class="nv">v6</span><span class="w">           </span><span class="c1"># 000000000040: 2C040C0A             v2 = kz + gy + cx</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v3</span><span class="p">,</span><span class="w"> </span><span class="nv">s14</span><span class="p">,</span><span class="w"> </span><span class="nv">v6</span><span class="w">           </span><span class="c1"># 000000000044: 2C060C0E             v3 = lz + hy + dx</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v0</span><span class="p">,</span><span class="w"> </span><span class="nv">s3</span><span class="p">,</span><span class="w"> </span><span class="nv">v7</span><span class="w">            </span><span class="c1"># 000000000048: 2C000E03             v0 = mw + iz + ey + ax</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v1</span><span class="p">,</span><span class="w"> </span><span class="nv">s7</span><span class="p">,</span><span class="w"> </span><span class="nv">v7</span><span class="w">            </span><span class="c1"># 00000000004C: 2C020E07             v1 = nw + jz + fy + bx</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v2</span><span class="p">,</span><span class="w"> </span><span class="nv">s11</span><span class="p">,</span><span class="w"> </span><span class="nv">v7</span><span class="w">           </span><span class="c1"># 000000000050: 2C040E0B             v2 = ow + kz + gy + cx</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v3</span><span class="p">,</span><span class="w"> </span><span class="nv">s15</span><span class="p">,</span><span class="w"> </span><span class="nv">v7</span><span class="w">           </span><span class="c1"># 000000000054: 2C060E0F             v3 = pw + lz + hy + dx</span>
<span class="nf">exp</span><span class="w"> </span><span class="nv">pos0</span><span class="p">,</span><span class="w"> </span><span class="nv">v0</span><span class="p">,</span><span class="w"> </span><span class="nv">v1</span><span class="p">,</span><span class="w"> </span><span class="nv">v2</span><span class="p">,</span><span class="w"> </span><span class="nv">v3</span><span class="w"> </span><span class="nv">done</span><span class="w">   </span><span class="c1"># 000000000058: C40008CF 03020100    output.position = {v0, v1, v2, v3}</span>
</pre></div>
</div>
<div class="highlight-nasm notranslate"><div class="highlight"><pre><span></span><span class="c1"># ISA Disassembly</span>
<span class="c1"># output.position = mul(World, vpos);</span>
<span class="w"> </span>
<span class="nf">v_mul_f32</span><span class="w"> </span><span class="nv">v0</span><span class="p">,</span><span class="w"> </span><span class="nv">s4</span><span class="p">,</span><span class="w"> </span><span class="nv">v5</span><span class="w">            </span><span class="c1"># 000000000018: 0A000A04             v0 = by</span>
<span class="nf">v_mul_f32</span><span class="w"> </span><span class="nv">v1</span><span class="p">,</span><span class="w"> </span><span class="nv">s5</span><span class="p">,</span><span class="w"> </span><span class="nv">v5</span><span class="w">            </span><span class="c1"># 00000000001C: 0A020A05             v1 = fy</span>
<span class="nf">v_mul_f32</span><span class="w"> </span><span class="nv">v2</span><span class="p">,</span><span class="w"> </span><span class="nv">s6</span><span class="p">,</span><span class="w"> </span><span class="nv">v5</span><span class="w">            </span><span class="c1"># 000000000020: 0A040A06             v2 = jy</span>
<span class="nf">v_mul_f32</span><span class="w"> </span><span class="nv">v3</span><span class="p">,</span><span class="w"> </span><span class="nv">s7</span><span class="p">,</span><span class="w"> </span><span class="nv">v5</span><span class="w">            </span><span class="c1"># 000000000024: 0A060A07             v3 = ny</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v0</span><span class="p">,</span><span class="w"> </span><span class="nv">s0</span><span class="p">,</span><span class="w"> </span><span class="nv">v4</span><span class="w">            </span><span class="c1"># 000000000028: 2C000800             v0 = ax + by</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v1</span><span class="p">,</span><span class="w"> </span><span class="nv">s1</span><span class="p">,</span><span class="w"> </span><span class="nv">v4</span><span class="w">            </span><span class="c1"># 00000000002C: 2C020801             v1 = ex + fy</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v2</span><span class="p">,</span><span class="w"> </span><span class="nv">s2</span><span class="p">,</span><span class="w"> </span><span class="nv">v4</span><span class="w">            </span><span class="c1"># 000000000030: 2C040802             v2 = ix + jy</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v3</span><span class="p">,</span><span class="w"> </span><span class="nv">s3</span><span class="p">,</span><span class="w"> </span><span class="nv">v4</span><span class="w">            </span><span class="c1"># 000000000034: 2C060803             v3 = mx + ny</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v0</span><span class="p">,</span><span class="w"> </span><span class="nv">s8</span><span class="p">,</span><span class="w"> </span><span class="nv">v6</span><span class="w">            </span><span class="c1"># 000000000038: 2C000C08             v0 = cz + ax + by</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v1</span><span class="p">,</span><span class="w"> </span><span class="nv">s9</span><span class="p">,</span><span class="w"> </span><span class="nv">v6</span><span class="w">            </span><span class="c1"># 00000000003C: 2C020C09             v1 = gz + ex + fy</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v2</span><span class="p">,</span><span class="w"> </span><span class="nv">s10</span><span class="p">,</span><span class="w"> </span><span class="nv">v6</span><span class="w">           </span><span class="c1"># 000000000040: 2C040C0A             v2 = kz + ix + jy</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v3</span><span class="p">,</span><span class="w"> </span><span class="nv">s11</span><span class="p">,</span><span class="w"> </span><span class="nv">v6</span><span class="w">           </span><span class="c1"># 000000000044: 2C060C0B             v3 = oz + mx + ny</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v0</span><span class="p">,</span><span class="w"> </span><span class="nv">s12</span><span class="p">,</span><span class="w"> </span><span class="nv">v7</span><span class="w">           </span><span class="c1"># 000000000048: 2C000E0C             v0 = dw + cz + ax + by</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v1</span><span class="p">,</span><span class="w"> </span><span class="nv">s13</span><span class="p">,</span><span class="w"> </span><span class="nv">v7</span><span class="w">           </span><span class="c1"># 00000000004C: 2C020E0D             v1 = hw + gz + ex + fy</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v2</span><span class="p">,</span><span class="w"> </span><span class="nv">s14</span><span class="p">,</span><span class="w"> </span><span class="nv">v7</span><span class="w">           </span><span class="c1"># 000000000050: 2C040E0E             v2 = lw + kz + ix + jy</span>
<span class="nf">v_mac_f32</span><span class="w"> </span><span class="nv">v3</span><span class="p">,</span><span class="w"> </span><span class="nv">s15</span><span class="p">,</span><span class="w"> </span><span class="nv">v7</span><span class="w">           </span><span class="c1"># 000000000054: 2C060E0F             v3 = pw + oz + mx + ny</span>
<span class="nf">exp</span><span class="w"> </span><span class="nv">pos0</span><span class="p">,</span><span class="w"> </span><span class="nv">v0</span><span class="p">,</span><span class="w"> </span><span class="nv">v1</span><span class="p">,</span><span class="w"> </span><span class="nv">v2</span><span class="p">,</span><span class="w"> </span><span class="nv">v3</span><span class="w"> </span><span class="nv">done</span><span class="w">   </span><span class="c1"># 000000000058: C40008CF 03020100    output.position = {v0, v1, v2, v3}</span>
</pre></div>
</div>
<p>Aside from the registers used, the GPU machine code (ISA disassembly) is the same for both vector by matrix and matrix by vector multiplications. To understand the listings above, observe how we compute the multiplication of a row vector by a matrix.</p>
<div class="math notranslate nohighlight">
\[\mathbf{uA}=\left\lbrack\matrix{x&amp;y&amp;z&amp;w}\right\rbrack\left\lbrack\matrix{a&amp;b&amp;c&amp;d\cr e&amp;f&amp;g&amp;h\cr i&amp;j&amp;k&amp;l\cr m&amp;n&amp;o&amp;p}\right\rbrack=\left\lbrack\matrix{ax+ey+iz+mw\cr bx+fy+jz+nw\cr cx+gy+kz+ow\cr dx+hy+lz+pw}\right\rbrack\]</div>
<p>And the multiplication of a matrix by a column vector as well.</p>
<div class="math notranslate nohighlight">
\[\mathbf{Au}=\left\lbrack\matrix{a&amp;b&amp;c&amp;d\cr e&amp;f&amp;g&amp;h\cr i&amp;j&amp;k&amp;l\cr m&amp;n&amp;o&amp;p}\right\rbrack\left\lbrack\matrix{x\cr y\cr z\cr w}\right\rbrack=\left\lbrack\matrix{ax+by+cz+dw\cr ex+fy+gz+hw\cr ix+jy+kz+lw\cr mx+ny+oz+pw}\right\rbrack\]</div>
<p>In the latter case, observe that the first column of the matrix <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> is scaled by <span class="math notranslate nohighlight">\(x\)</span>, the second by <span class="math notranslate nohighlight">\(y\)</span>, the third by <span class="math notranslate nohighlight">\(z\)</span>, and the fourth by <span class="math notranslate nohighlight">\(w\)</span>. Finally, the sum of corresponding components in the scaled columns gives us the components of the resultant vector.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The ISA disassembly unveils what GPUs mean by SIMD operations. GPU hardware cores commonly include 32-bit registers and ALUs to execute single operations on 32-bit data. However, GPUs are perfectly capable of performing the same instruction in parallel on different hardware cores (usually 64) for different data (e.g., vertex data). The shader model hides\abstracts these hardware details with 128-bit shader registers and SIMD instructions to mimic the CPU behaviour. We will return to the architecture and design of GPUs in a later tutorial.</p>
</div>
<br>
</section>
<section id="matrices-in-directx">
<h2>Matrices in DirectX<a class="headerlink" href="#matrices-in-directx" title="Link to this heading">#</a></h2>
<p>Matrices play a crucial role in computer graphics, making them a fundamental tool to use in DirectX applications as well. They are widely used in both C++ and in HLSL.</p>
<section id="hlsl">
<h3>HLSL<a class="headerlink" href="#hlsl" title="Link to this heading">#</a></h3>
<p>In HLSL, we can use the built-in types <strong>float2x2</strong>, <strong>float3x3</strong> and <strong>float4x4</strong> to represent <span class="math notranslate nohighlight">\(2\times 2\)</span>, <span class="math notranslate nohighlight">\(3\times 3\)</span> and <span class="math notranslate nohighlight">\(4\times 4\)</span> matrices of floating-point elements. Similarly, we can use <strong>int2x2</strong>, <strong>int3x3</strong> and <strong>int4x4</strong> for matrices of integers. We can also use the keyword <strong>matrix</strong> to declare matrices of various types and dimensions. To access a specific element of a matrix we can use array notation (indexing), or the structure operator <code class="docutils literal notranslate"><span class="pre">.</span></code>, followed by one of two naming sets:</p>
<p>The zero-based row-column position:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_m00</span><span class="p">,</span>  <span class="n">_m01</span><span class="p">,</span>  <span class="n">_m02</span><span class="p">,</span>  <span class="n">_m03</span>
<span class="n">_m10</span><span class="p">,</span>  <span class="n">_m11</span><span class="p">,</span>  <span class="n">_m12</span><span class="p">,</span>  <span class="n">_m13</span>
<span class="n">_m20</span><span class="p">,</span>  <span class="n">_m21</span><span class="p">,</span>  <span class="n">_m22</span><span class="p">,</span>  <span class="n">_m23</span>
<span class="n">_m30</span><span class="p">,</span>  <span class="n">_m31</span><span class="p">,</span>  <span class="n">_m32</span><span class="p">,</span>  <span class="n">_m33</span>
</pre></div>
</div>
<p>The one-based row-column position:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_11</span><span class="p">,</span>  <span class="n">_12</span><span class="p">,</span>  <span class="n">_13</span><span class="p">,</span>  <span class="n">_14</span>
<span class="n">_21</span><span class="p">,</span>  <span class="n">_22</span><span class="p">,</span>  <span class="n">_23</span><span class="p">,</span>  <span class="n">_24</span>
<span class="n">_31</span><span class="p">,</span>  <span class="n">_32</span><span class="p">,</span>  <span class="n">_33</span><span class="p">,</span>  <span class="n">_34</span>
<span class="n">_41</span><span class="p">,</span>  <span class="n">_42</span><span class="p">,</span>  <span class="n">_43</span><span class="p">,</span>  <span class="n">_44</span>
</pre></div>
</div>
<p>Just like vectors, we can specify one or more components from either naming set. However, we cannot use swizzling with array notation.</p>
<p>As you can see in the following listing, initialization and indexing always work with rows, even if we use a column-major order in HLSL. That way, we can mimic the usual C++ style to access matrix elements from HLSL code.</p>
<div class="highlight-hlsl notranslate"><div class="highlight"><pre><span></span><span class="c1">// float2x2 fMatrix = {0.0f, 0.1f,2.1f, 2.2f};</span>
<span class="kt">matrix</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">fMatrix</span><span class="w"> </span><span class="o">=</span>
<span class="p">{</span>
<span class="w">    </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1f</span><span class="p">,</span><span class="w"> </span><span class="c1">// row 1</span>
<span class="w">    </span><span class="mf">2.1f</span><span class="p">,</span><span class="w"> </span><span class="mf">2.2f</span><span class="w">  </span><span class="c1">// row 2</span>
<span class="p">};</span>
<span class="w"> </span>
<span class="w"> </span>
<span class="kt">float4x4</span><span class="w"> </span><span class="n">M</span><span class="p">;</span>
<span class="n">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">                    </span><span class="c1">// Initialize M</span>
<span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0f</span><span class="p">,</span><span class="w">  </span><span class="c1">// first row</span>
<span class="mf">5.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">6.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">7.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">8.0f</span><span class="p">,</span><span class="w">  </span><span class="c1">// second row</span>
<span class="c1">// ...                   // third row</span>
<span class="c1">// ...                   // fourth row</span>
<span class="p">};</span><span class="w">                 </span>
<span class="w"> </span>
<span class="w"> </span>
<span class="c1">// Initialize T</span>
<span class="c1">// {0.0f, 0.0f, 0.0f} first row</span>
<span class="c1">// {1.0f, 1.0f, 1.0f} second row</span>
<span class="c1">// {2.0f, 2.0f, 2.0f} third row</span>
<span class="kt">float3x3</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0f</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<span class="w"> </span>
<span class="w"> </span>
<span class="kt">float4</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">4.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="w"> </span><span class="p">};</span>
<span class="w"> </span>
<span class="kt">float</span><span class="w"> </span><span class="n">f0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">[</span><span class="mo">0</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span><span class="w">     </span><span class="c1">// f0 = 0|1-th element of M</span>
<span class="kt">float</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">_m01</span><span class="p">;</span><span class="w">      </span><span class="c1">// equivalent to f1 = M[0][1]</span>
<span class="kt">float</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">_12</span><span class="p">;</span><span class="w">       </span><span class="c1">// equivalent to f2 = M[0][1]</span>
<span class="w"> </span>
<span class="n">M</span><span class="p">[</span><span class="mo">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">;</span><span class="w">               </span><span class="c1">// First row of M = v</span>
<span class="n">M</span><span class="p">.</span><span class="n">_m11</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mo">0</span><span class="p">];</span><span class="w">          </span><span class="c1">// equivalent to M[1][1] = v[0]</span>
<span class="kt">float4</span><span class="w"> </span><span class="n">f3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">_11_12</span><span class="p">;</span><span class="w">   </span><span class="c1">// equivalent to f3 = (M[0][0], M[0][1])</span>
<span class="n">M</span><span class="p">.</span><span class="n">_12_21</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">_21_12</span><span class="p">;</span><span class="w">    </span><span class="c1">// equivalent to the following pseudocode:</span>
<span class="w">                        </span><span class="c1">// float2 vec = (M[0][1], M[1][0])</span>
<span class="w">                        </span><span class="c1">// vec = vec.yx</span>
</pre></div>
</div>
</section>
<section id="c">
<h3>C++<a class="headerlink" href="#c" title="Link to this heading">#</a></h3>
<p>In C++, we can use the <strong>XMMATRIX</strong> type provided by DirectXMath to represent <span class="math notranslate nohighlight">\(4\times 4\)</span> matrices. If you need matrices of lower dimensions, you can use <strong>XMMATRIX</strong> as well by only initializing and using the corresponding elements.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kr">__declspec</span><span class="p">(</span><span class="n">align</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">XMMATRIX</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">XMVECTOR</span><span class="w"> </span><span class="n">r</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="p">()</span><span class="w"> </span><span class="n">XM_CTOR_DEFAULT</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">constexpr</span><span class="w"> </span><span class="n">XMMATRIX</span><span class="p">(</span><span class="n">FXMVECTOR</span><span class="w"> </span><span class="n">R0</span><span class="p">,</span><span class="w"> </span><span class="n">FXMVECTOR</span><span class="w"> </span><span class="n">R1</span><span class="p">,</span><span class="w"> </span><span class="n">FXMVECTOR</span><span class="w"> </span><span class="n">R2</span><span class="p">,</span><span class="w"> </span><span class="n">CXMVECTOR</span><span class="w"> </span><span class="n">R3</span><span class="p">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">        </span><span class="n">r</span><span class="p">{</span><span class="w"> </span><span class="n">R0</span><span class="p">,</span><span class="n">R1</span><span class="p">,</span><span class="n">R2</span><span class="p">,</span><span class="n">R3</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">m00</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m01</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m02</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m03</span><span class="p">,</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">m10</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m11</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m12</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m13</span><span class="p">,</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">m20</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m21</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m22</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m23</span><span class="p">,</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">m30</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m31</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m32</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m33</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">explicit</span><span class="w"> </span><span class="n">XMMATRIX</span><span class="p">(</span><span class="n">_In_reads_</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">pArray</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">XMMATRIX</span><span class="o">&amp;</span><span class="w"> </span><span class="n">M</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"> </span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"> </span><span class="n">r</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">r</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w"> </span><span class="n">r</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">r</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="w">    </span><span class="k">operator</span><span class="o">+</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="w">    </span><span class="k">operator</span><span class="o">-</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">FXMMATRIX</span><span class="w"> </span><span class="n">M</span><span class="p">);</span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">-=</span><span class="w"> </span><span class="p">(</span><span class="n">FXMMATRIX</span><span class="w"> </span><span class="n">M</span><span class="p">);</span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="n">FXMMATRIX</span><span class="w"> </span><span class="n">M</span><span class="p">);</span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">S</span><span class="p">);</span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">/=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">S</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="w">    </span><span class="k">operator</span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">FXMMATRIX</span><span class="w"> </span><span class="n">M</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="w">    </span><span class="k">operator</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">FXMMATRIX</span><span class="w"> </span><span class="n">M</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="w">    </span><span class="k">operator</span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">FXMMATRIX</span><span class="w"> </span><span class="n">M</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="w">    </span><span class="k">operator</span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="n">XMMATRIX</span><span class="w">    </span><span class="k">operator</span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">friend</span><span class="w"> </span><span class="n">XMMATRIX</span><span class="w"> </span><span class="k">operator</span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">FXMMATRIX</span><span class="w"> </span><span class="n">M</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
<p>As you can see, <strong>XMMATRIX</strong> includes an array of <strong>XMVECTOR</strong>s, so we shouldnâ€™t use it as a class member. Fortunately, DirectXMath also provides the following types, which allow us to use matrices as class members.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">XMFLOAT4X4</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">union</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">struct</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">_11</span><span class="p">,</span><span class="w"> </span><span class="n">_12</span><span class="p">,</span><span class="w"> </span><span class="n">_13</span><span class="p">,</span><span class="w"> </span><span class="n">_14</span><span class="p">;</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">_21</span><span class="p">,</span><span class="w"> </span><span class="n">_22</span><span class="p">,</span><span class="w"> </span><span class="n">_23</span><span class="p">,</span><span class="w"> </span><span class="n">_24</span><span class="p">;</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">_31</span><span class="p">,</span><span class="w"> </span><span class="n">_32</span><span class="p">,</span><span class="w"> </span><span class="n">_33</span><span class="p">,</span><span class="w"> </span><span class="n">_34</span><span class="p">;</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">_41</span><span class="p">,</span><span class="w"> </span><span class="n">_42</span><span class="p">,</span><span class="w"> </span><span class="n">_43</span><span class="p">,</span><span class="w"> </span><span class="n">_44</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">m</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">4</span><span class="p">];</span>
<span class="w">    </span><span class="p">};</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">XMFLOAT4X4</span><span class="p">()</span><span class="w"> </span><span class="n">XM_CTOR_DEFAULT</span>

<span class="w">    </span><span class="n">XM_CONSTEXPR</span><span class="w"> </span><span class="n">XMFLOAT4X4</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">m00</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m01</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m02</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m03</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">float</span><span class="w"> </span><span class="n">m10</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m11</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m12</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m13</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">float</span><span class="w"> </span><span class="n">m20</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m21</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m22</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m23</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">float</span><span class="w"> </span><span class="n">m30</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m31</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m32</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m33</span><span class="p">)</span>
<span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">_11</span><span class="p">(</span><span class="n">m00</span><span class="p">),</span><span class="w"> </span><span class="n">_12</span><span class="p">(</span><span class="n">m01</span><span class="p">),</span><span class="w"> </span><span class="n">_13</span><span class="p">(</span><span class="n">m02</span><span class="p">),</span><span class="w"> </span><span class="n">_14</span><span class="p">(</span><span class="n">m03</span><span class="p">),</span>
<span class="w">        </span><span class="n">_21</span><span class="p">(</span><span class="n">m10</span><span class="p">),</span><span class="w"> </span><span class="n">_22</span><span class="p">(</span><span class="n">m11</span><span class="p">),</span><span class="w"> </span><span class="n">_23</span><span class="p">(</span><span class="n">m12</span><span class="p">),</span><span class="w"> </span><span class="n">_24</span><span class="p">(</span><span class="n">m13</span><span class="p">),</span>
<span class="w">        </span><span class="n">_31</span><span class="p">(</span><span class="n">m20</span><span class="p">),</span><span class="w"> </span><span class="n">_32</span><span class="p">(</span><span class="n">m21</span><span class="p">),</span><span class="w"> </span><span class="n">_33</span><span class="p">(</span><span class="n">m22</span><span class="p">),</span><span class="w"> </span><span class="n">_34</span><span class="p">(</span><span class="n">m23</span><span class="p">),</span>
<span class="w">        </span><span class="n">_41</span><span class="p">(</span><span class="n">m30</span><span class="p">),</span><span class="w"> </span><span class="n">_42</span><span class="p">(</span><span class="n">m31</span><span class="p">),</span><span class="w"> </span><span class="n">_43</span><span class="p">(</span><span class="n">m32</span><span class="p">),</span><span class="w"> </span><span class="n">_44</span><span class="p">(</span><span class="n">m33</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="k">explicit</span><span class="w"> </span><span class="n">XMFLOAT4X4</span><span class="p">(</span><span class="n">_In_reads_</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">pArray</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">    </span><span class="kt">float</span><span class="w">       </span><span class="nf">operator</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">Row</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">Column</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">[</span><span class="n">Row</span><span class="p">][</span><span class="n">Column</span><span class="p">];</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kt">float</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">operator</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">Row</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">Column</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">[</span><span class="n">Row</span><span class="p">][</span><span class="n">Column</span><span class="p">];</span><span class="w"> </span><span class="p">}</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">XMFLOAT4X4</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">XMFLOAT4X4</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Float4x4</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">XMFLOAT3X3</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">union</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">struct</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">_11</span><span class="p">,</span><span class="w"> </span><span class="n">_12</span><span class="p">,</span><span class="w"> </span><span class="n">_13</span><span class="p">;</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">_21</span><span class="p">,</span><span class="w"> </span><span class="n">_22</span><span class="p">,</span><span class="w"> </span><span class="n">_23</span><span class="p">;</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">_31</span><span class="p">,</span><span class="w"> </span><span class="n">_32</span><span class="p">,</span><span class="w"> </span><span class="n">_33</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">m</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">];</span>
<span class="w">    </span><span class="p">};</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">XMFLOAT3X3</span><span class="p">()</span><span class="w"> </span><span class="n">XM_CTOR_DEFAULT</span>

<span class="w">    </span><span class="n">XM_CONSTEXPR</span><span class="w"> </span><span class="n">XMFLOAT3X3</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">m00</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m01</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m02</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">float</span><span class="w"> </span><span class="n">m10</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m11</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m12</span><span class="p">,</span>
<span class="w">                            </span><span class="kt">float</span><span class="w"> </span><span class="n">m20</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m21</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">m22</span><span class="p">)</span>
<span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">_11</span><span class="p">(</span><span class="n">m00</span><span class="p">),</span><span class="w"> </span><span class="n">_12</span><span class="p">(</span><span class="n">m01</span><span class="p">),</span><span class="w"> </span><span class="n">_13</span><span class="p">(</span><span class="n">m02</span><span class="p">),</span>
<span class="w">        </span><span class="n">_21</span><span class="p">(</span><span class="n">m10</span><span class="p">),</span><span class="w"> </span><span class="n">_22</span><span class="p">(</span><span class="n">m11</span><span class="p">),</span><span class="w"> </span><span class="n">_23</span><span class="p">(</span><span class="n">m12</span><span class="p">),</span>
<span class="w">        </span><span class="n">_31</span><span class="p">(</span><span class="n">m20</span><span class="p">),</span><span class="w"> </span><span class="n">_32</span><span class="p">(</span><span class="n">m21</span><span class="p">),</span><span class="w"> </span><span class="n">_33</span><span class="p">(</span><span class="n">m22</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="k">explicit</span><span class="w"> </span><span class="n">XMFLOAT3X3</span><span class="p">(</span><span class="n">_In_reads_</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">pArray</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">    </span><span class="kt">float</span><span class="w">       </span><span class="nf">operator</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">Row</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">Column</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">[</span><span class="n">Row</span><span class="p">][</span><span class="n">Column</span><span class="p">];</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kt">float</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">operator</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">Row</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">Column</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">[</span><span class="n">Row</span><span class="p">][</span><span class="n">Column</span><span class="p">];</span><span class="w"> </span><span class="p">}</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">XMFLOAT3X3</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">XMFLOAT3X3</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Float3x3</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
<p>When you create a function that accepts one or more <strong>XMMATRIX</strong>s, in declaring function parameters follow these guidelines:</p>
<ul class="simple">
<li><p>Use <strong>FXMMATRIX</strong> for the first parameter.</p></li>
<li><p>Use <strong>CXMMATRIX</strong> for the remaining ones.</p></li>
</ul>
<p><strong>FXMMATRIX</strong> and <strong>CXMMATRIX</strong> are both aliases to <strong>XMVECTOR</strong>. They allow the system to use the appropriate calling conventions for each platform supported by the DirectXMath Library. To learn more about calling convections, refer to the official documentation (see <span id="id3">[<a class="reference internal" href="#id25" title="Microsoft. Directxmath library internals. https://learn.microsoft.com/en-us/windows/win32/dxmath/pg-xnamath-internals.">Mica</a>]</span> and <span id="id4">[<a class="reference internal" href="#id26" title="Microsoft. __vectorcall. https://learn.microsoft.com/en-us/cpp/cpp/vectorcall.">Micb</a>]</span> in the reference list at the end of the tutorial).</p>
<p>Obviously, all the basic matrix operations discussed in this tutorial (sum, difference and various types of multiplication) are both defined in HLSL and provided by DirectXMath, along with other helper functions that can be performed on matrices such as inversion, transposition and determinant calculation. We will examine most of these functions in the upcoming tutorials.</p>
<br>
<div class="admonition-support-this-project admonition">
<p class="admonition-title">Support this project</p>
<p>If you found the content of this tutorial somewhat useful or interesting, please consider supporting this project by clicking on the Sponsor button below. Whether a small tip, a one-time donation, or a recurring payment, all contributions are welcome! Thank you!</p>
<figure class="align-center">
<a class="reference external image-reference" href="https://github.com/sponsors/PAMinerva"><img alt="../../../_images/sponsor.png" src="../../../_images/sponsor.png" /></a>
</figure>
</div>
<br>
</section>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h2>
<div class="docutils container" id="id5">
<div role="list" class="citation-list">
<div class="citation" id="id14" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">FH21</a><span class="fn-bracket">]</span></span>
<p>GeraldÂ E. Farin and Dianne Hansford. <em>Practical Linear Algebra: A Geometry Toolbox</em>. CRC Press, 4th edition, 2021.</p>
</div>
<div class="citation" id="id25" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">Mica</a><span class="fn-bracket">]</span></span>
<p>Microsoft. Directxmath library internals. <a class="reference external" href="https://learn.microsoft.com/en-us/windows/win32/dxmath/pg-xnamath-internals">https://learn.microsoft.com/en-us/windows/win32/dxmath/pg-xnamath-internals</a>.</p>
</div>
<div class="citation" id="id26" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">Micb</a><span class="fn-bracket">]</span></span>
<p>Microsoft. __vectorcall. <a class="reference external" href="https://learn.microsoft.com/en-us/cpp/cpp/vectorcall">https://learn.microsoft.com/en-us/cpp/cpp/vectorcall</a>.</p>
</div>
<div class="citation" id="id15" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">SE02</a><span class="fn-bracket">]</span></span>
<p>Philip Schneider and DavidÂ H. Eberly. <em>Geometric Tools for Computer Graphics</em>. Morgan Kaufmann, 1st edition, 2002.</p>
</div>
</div>
</div>
<br>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Tutorials\Appendices\01-MathBasics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="vectors.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Vectors</p>
      </div>
    </a>
    <a class="right-next"
       href="transformations.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Transformations</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definition">Definition</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-matrix-operations">Basic matrix operations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#addition">Addition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scalar-multiplication">Scalar multiplication</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#properties-of-addition-and-scalar-multiplications">Properties of addition and scalar multiplications</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matrix-multiplication">Matrix multiplication</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#vector-matrix-multiplication">Vector-Matrix multiplication</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#properties-of-matrix-multiplication">Properties of matrix multiplication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#transpose-of-a-matrix">Transpose of a matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#identity-matrix">Identity matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#determinant-of-a-matrix">Determinant of a matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adjoint-of-a-matrix">Adjoint of a matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inverse-of-a-matrix">Inverse of a matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#memory-layout">Memory layout</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matrices-in-directx">Matrices in DirectX</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hlsl">HLSL</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c">C++</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By P. A. Minerva
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>